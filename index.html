<html>

<head>
    <title>Pop-Up Lab</title>
    <meta http-equiv="Pragma" CONTENT="no-cache" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> </meta>
    <script>
        !function (win, option) {
            var count = 0,
                designWidth = option.designWidth,
                designHeight = option.designHeight || 0,
                designFontSize = option.designFontSize || 20,
                callback = option.callback || null,
                root = document.documentElement,
                body = document.body,
                rootWidth, newSize, t, self;
            root.style.width = '100%';
            function _getNewFontSize() {
                var scale = designHeight !== 0 ? Math.min(win.innerWidth / designWidth, win.innerHeight / designHeight) : win.innerWidth / designWidth;
                return parseInt(scale * 10000 * designFontSize) / 10000;
            }
            !function () {
                rootWidth = root.getBoundingClientRect().width;
                self = self ? self : arguments.callee;
                if (rootWidth !== win.innerWidth && count < 20) {
                    win.setTimeout(function () {
                        count++;
                        self();
                    }, 0);
                } else {
                    newSize = _getNewFontSize();
                    if (newSize + 'px' !== getComputedStyle(root)['font-size']) {
                        root.style.fontSize = newSize + "px";
                        return callback && callback(newSize);
                    };
                };
            } ();
            win.addEventListener("onorientationchange" in window ? "orientationchange" : "resize", function () {
                clearTimeout(t);
                t = setTimeout(function () {
                    self();
                }, 300);
            }, false);
        } (window, {
            designWidth: 750,
            designHeight: 1136,
            designFontSize: 100
        });
    </script>
<link rel="stylesheet/less" href="css/style.less">
<script src="js/less.js"></script>
</head>

<body>
    <div class="loading">loading...</div>
    <div class="allbg">
        <img src="assets/01board/bg.png">
    </div>
    <div id="particles-js"></div>
    <div class="section sec1 z-2">
        <div class="content">
            <img src="assets/01board/content.png">
        </div>
        <div class="traingle"></div>
    </div>
    <div class="section sec2 z-1">
        <div class="bec" data-id="10089:17988">
            <div class="icon"><img src="assets/icon/1.png"></div>
            <div class="text">EmergeLab</div>
        </div>
        <div class="bec" data-id="10089:17989">
            <div class="icon"><img src="assets/icon/2.png"></div>
            <div class="text">一点资讯</div>
        </div>
        <div class="bec" data-id="10089:17990">
            <div class="icon"><img src="assets/icon/3.png"></div>
            <div class="text">全息3D网</div>
        </div>
        <div class="bec" data-id="10089:17991">
            <div class="icon"><img src="assets/icon/4.png"></div>
            <div class="text">EVOLVER</div>
        </div>
        <div class="bec" data-id="10089:17992">
            <div class="icon"><img src="assets/icon/5.png"></div>
            <div class="text">浸入式VR</div>
        </div>
        <div class="logo"></div>
        <div class="ics ic1">
            <div class="close"></div>
            <div class="title"><img src="assets/03board/logo1.png"></div>
            <a href="http://emerge.cc">emerge.cc</a>
            <div class="desc">
                <p>当技术与创意相融，科技就会像魔法一样神奇<br>当商业与创新碰撞，产品就会让生活更美好<br>Emerge致力于畅想互动体验的全新可能</p>
                <p>把精妙的设计变成运转的电路和程序<br>把离奇的想法变成活的、可触摸的“东西”<br>让网络世界了解你身边的信息，创造新颖便捷的自然交互体验</p>
                <p>我们不断研究与探索，<br>制造更多可能。</p>
            </div>
        </div>
        <div class="ics ic2">
            <div class="close"></div>
            <div class="title"><img src="assets/03board/logo2.png"></div>
            <a href="http://www.yidianzixun.com">www.yidianzixun.com</a>
            <div class="desc">
                <p>梦起于硅谷，诞生于中国，放眼于世界，做有全球科技影响力的移动互联网创新企业。</p>
                <p> 2015年4月一点资讯在美国硅谷成立关联公司ParticleMedia，展开全球战略部署。推出的一点资讯英文版News break 连续两次获得美国App Store推荐，已成为美国热门新闻聚合应用。</p>
            </div>
        </div>
        <div class="ics ic3">
            <div class="close"></div>
            <div class="title"><img src="assets/03board/logo3.png"></div>
            <a href="http://www.3D-ZH.com">www.3D-ZH.com</a>
            <div class="desc">
                <p>北京触视界科技有限公司暨全息3D网致力于全息和AR技术专业机构。</p>
                <p>中国国际科技文化协会会员、中关村虚拟现实协会会员、中国婚博会唯一技术支持单位，北京市长赠言单位。</p>
                <p>知名案例包括：国家邦交习总观看全息项目、国家科技馆、自然博物馆、抗日纪念馆、凤凰卫视20周年等。</p>
                <p>主要产品包括3D魔方、3D幻影、3D触睿、3D展柜等，广泛应于舞台演出、奢侈品、汽车、地产、展馆展厅、商业景观等。</p>
            </div>
        </div>
        <div class="ics ic4">
            <div class="close"></div>
            <div class="title"><img src="assets/03board/logo4.png"></div>
            <a href="http://www.efrobot.com">www.efrobot.com</a>
            <div class="desc">
                <p>项目研发立项于2014年8月，公司成立于2015年2月，是国内首批从事智能服务型机器人研发的高科技创新企业。</p>
                <p>公司拥有来自顶级高校和机器人研究所的专家团队<br>同时引进大量科技海归人才，致力于开发世界级的家用与商用服务型机器人。</p>
                <p>目前员工人数260人，其中研发技术人员200人。进化者全力打造中国智能机器人代表。第一代机器人小胖E01，是中国科学家二十年心血的结晶集自主导航、双目视觉、自然语义理解 等多项世界级机器人前沿核心技术。在世界非人形机器人领域，处于先进地位。</p>
            </div>
        </div>
        <video src="assets/03board/video5.mp4" controls="controls" class="ics ic5" width="100%" height="100%"></video>
        <div class="hand">
            <img src="assets/hands1.png?123" class="hd1">
            <span class="c1"></span>
            <span class="c2"></span>
            <span class="c3"></span>
        </div>
    </div>
    <script src="js/wx.js"></script>
    <script src="js/zepto.js?sadfffff"></script>
    <script src="js/ease.js"></script>
    <script src="js/beacon.js?sadfffff"></script>
    <script src="js/wechat.js?sadffffff"></script>
    <script src="js/particles.js"></script>
    <script src="js/stats.js"></script>
    <script>
        $(function () {
            var _sec1 = $('.sec1'), _s1c = _sec1.find('.content'), _bg = $('.allbg');
            var sec = $('.section');
            var canvas = $('#particles-js');
            var _w = sec.width(), _h = sec.height(), t = 0, t2 = 0, sin = Math.sin, cos = Math.cos, abs = Math.abs, random = Math.random, min = Math.min, max = Math.max;
            $(window).on('scroll', function (e) {
                var pos = _sec1[0].getBoundingClientRect();
                var abt = abs(pos.top);
                _bg.css('transform', 'translateY(' + pos.top * .2 + 'px)');
                _s1c.css('transform', 'translateY(' + pos.top * .4 + 'px)');
                canvas.css('opacity', map(abt, 0, pos.height, 0, 1));
            });
            window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (cb) { setTimeout(cb, 160) };
            var list = $('.sec2 .bec');
            var points = [];
            for (var i = 0; i < 10; i++) {
                var x = _w / 10 * i + ~~(random() * 10);
                var y = 0;
                points.push({ x: x, y: y });
            }
            for (var i = 0; i < 10; i++) {
                var y = _w / 10 * i + ~~(random() * 10);
                var x = 0;
                points.push({ x: x, y: y });
            }
            for (var i = 0; i < 20; i++) {
                var x = min(random() * _w, _w);
                var y = min(random() * _h, _h);
            }
            list.each(function (id) {
                $(this).on('click', function () {
                    $('.ics').hide();
                    if ($(this).hasClass('center')) {
                        var ic = $('.ic' + (id + 1));
                        ic.show();
                        ic.find('.close').on('click', function () {
                            ic.hide();
                        });
                        if (ic.is('video')) {
                            ic[0].play();
                        }
                    }
                });
                for (var i in beaconList) {
                    if ($(this).data('id') == i) {
                        $(this).data('rssi', beaconList[i].rssi);
                    }
                }
            });
            [].sort.call(list, function (a, b) {
                return $(b).data('rssi') - $(a).data('rssi');
            });
            for (var i = 0; i < 3; i++) {
                var _item = $(list[i]);
                if (i == 0 && _item.data('rssi')) _item.addClass('center');
                _item.addClass('show');
            }
            var showList = $('.show');
            list.each(function (id) {
                var wd = $(this).width(), hd = $(this).height();
                var x, y, z;
                switch (~~id) {
                    case 0:
                        x = 10 * random() + 5;
                        y = 20 * random() + 5;
                        break;
                    case 1:
                        x = _w - 10 * random() - wd;
                        y = _h / 2 - hd / 2;
                        break;
                    case 2:
                        x = 25 * random() + 10;
                        y = _h - 20 * random() - hd;
                        break;
                    case 3:
                        x = 10 * random() + 5;
                        y = _h / 2 - hd / 2;
                        break;
                    case 4:
                        x = _w - 10 * random() - wd;
                        y = 20 * random() + 5;
                        break;
                    default:
                        break;
                }
                points.push({ x: ~~x, y: ~~y, id: id });
                $(this).css({ "transform": "translateX(" + ~~x + "px) translateY(" + ~~y + "px) scale(" + ~~z / 100 + ")" }).data('x', ~~x).data('y', ~~y).data('z', 50);
            });
            function map(x, a, b, c, d) {
                return (x - a) / (b - a) * (d - c) + c;
            };

            function render() {
                $('video').each(function () {
                    if (this.paused) {
                        $(this).hide();
                    }
                })
                window.updateease();
                t += 0.01;
                if (t2 >= 1) { t2 = 0 }
                t2 += 0.01;
                var a = abs(sin(t));
                var b = abs(sin(t / 2));
                var c = map(t2, 0, 1, 0, 4);
                $('.hand .c3').css({ "transform": "scale(" + (c) + ")", "opacity": (1 - c / 4) });
                $('.hand .c1').css({ "transform": "scale(" + (c * 1.5) + ")", "opacity": (1 - c / 4) });
                $('.hand .c2').css({ "transform": "scale(" + (c * 2) + ")", "opacity": (1 - c / 4) });
                list.each(function (id) {
                    for (var i in beaconList) {
                        if ($(this).data('id') == i) {
                            $(this).data('rssi', beaconList[i].rssi);
                        }
                    }
                });

                [].sort.call(list, function (a, b) {
                    return $(b).data('rssi') - $(a).data('rssi');
                });

                for (var i = 0; i < list.length; i++) {
                    var _item = $(list[i]);
                    if (i == 0 && _item.data('rssi')) {
                        _item.addClass('center');
                    } else {
                        _item.removeClass('center');
                    }
                    if (i < 3) {
                        _item.addClass('show');
                    } else {
                        _item.removeClass('show').css({ "opacity": 0 });
                    }
                }

                var showList = $('.show');

                showList.each(function (id) {
                    var next = $(this).nextAll('.show');
                    var x = ~~$(this).data('x');
                    var y = ~~$(this).data('y');
                    var z = ~~$(this).data('z');
                    var w = ~~$(this).width();
                    var h = ~~$(this).height();
                    if (beaconList && beaconList[$(this).data('id')]) {
                        var _change = beaconList[$(this).data('id')].rssi + 50;
                        x = sin(t + id) * _change + x;
                        y = sin(t - id) * _change + y;
                        if (x - w / 2 < 0) x = 0;
                        if (x + w / 2 > _w) x = _w - w;
                        if (y - h / 2 < 0) y = 0;
                        if (y + h / 2 > _h) y = _h - h;
                        if ($(this).hasClass('center')) {
                            z = 130 - abs(_change * 1.2);
                            $('.hand').css({ "transform": "translateX(" + ~~(x + w / 2 + 15) + "px) translateY(" + ~~(y + h / 2 + 15) + "px)", "display": "block" });
                            $(this).css({ "opacity": ~~(t * 5 % 2) + .3 });
                        } else {
                            z = 100 - abs(_change * 1.2);
                            $(this).css({ "opacity": 1 });
                        }
                    };

                    $(this).css({ "transform": "translateX(" + ~~x + "px) translateY(" + ~~y + "px) scale(" + ~~z / 100 + ")" });
                });
                requestAnimationFrame(render);
            }
            function loadImage(url, callback) {
                var img = new Image();
                img.onload = function () {
                    img.onload = null;
                    callback(img);
                }
                img.src = url;
            }
            render();
            loadImage('assets/01board/bg.png', function () {
                $('.loading').remove();
                // setTimeout(function () {
                //     $('.sec1').addClass('ani');
                // }, 500);
            });
            particlesJS("particles-js", {
                "particles": {
                    "number": {
                        "value": 380,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#ffffff"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        },
                        "image": {
                            "src": "img/github.svg",
                            "width": 100,
                            "height": 100
                        }
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": false,
                        "anim": {
                            "enable": false,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                        "anim": {
                            "enable": false,
                            "speed": 40,
                            "size_min": 0.1,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#ffffff",
                        "opacity": 0.4,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 6,
                        "direction": "none",
                        "random": false,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": false,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 1
                            }
                        },
                        "bubble": {
                            "distance": 400,
                            "size": 40,
                            "duration": 2,
                            "opacity": 8,
                            "speed": 3
                        },
                        "repulse": {
                            "distance": 200,
                            "duration": 0.4
                        },
                        "push": {
                            "particles_nb": 4
                        },
                        "remove": {
                            "particles_nb": 2
                        }
                    }
                },
                "retina_detect": true
            });
        });
    </script>
</body>

</html>